!function(a,b){b["true"]=a;var c;!function(a){var b=function(){function b(){this.content=document.getElementById("content"),this.word=document.getElementById("word"),this.chrono=document.getElementById("chrono"),this.choice=document.getElementById("choices"),this.choices=document.getElementsByClassName("choice"),this.audio=document.getElementById("loop"),this.fail=document.getElementById("fail"),this.score=0,this.duration=1010}return b.prototype.start=function(){for(var a=this,b=0;b<this.choices.length;++b)e.Scene.attach(this.choices[b],"click",function(b){return a.valid(b.target)});e.Scene.attach(window,"keyup",function(b){return a.keyboard(b)}),this.closeText(),this.audio.play()},b.prototype.terminate=function(){this.fail.play(),this.audio.pause(),this.audio.currentTime=0},b.prototype.updateWord=function(){var a=this,b=e.Color.getColors(3);this.updateChoice(b),this.updateText(b[0],b[1]),this.updateContent(b[2]),this.timer=window.setTimeout(function(){return a.valid(null)},this.duration)},b.prototype.updateChoice=function(a){var b=Math.floor(Math.random()*a.length);this.winning=this.choices.item(b);for(var c=0;c<a.length;++c)this.applyBackgroundColor(this.choices.item((c+b)%this.choices.length),a[c].light)},b.prototype.updateText=function(a,b){this.word.innerHTML=a.name,this.word.style.color=b.regular,this.word.className+=" bigger",this.chrono.className+=" upper"},b.prototype.updateContent=function(a){this.applyBackgroundColor(this.content,a.regular)},b.prototype.getChoice=function(a){return this.choice.children.item(a)},b.prototype.keyboard=function(a){switch(a.keyCode){case 37:return this.valid(this.getChoice(0));case 40:return this.valid(this.getChoice(1));case 39:return this.valid(this.getChoice(2))}},b.prototype.valid=function(b){return window.clearTimeout(this.timer),b!=this.winning?void e.Scene.change_scene(new a.Score(this.score)):(++this.score,void this.closeText())},b.prototype.applyBackgroundColor=function(a,b){a.style.backgroundColor=b},b.prototype.closeText=function(){var a=this;this.word.className=this.word.className.replace(/\s*\bbigger\b/,""),this.chrono.className=this.chrono.className.replace(/\s*\bupper\b/,""),window.setTimeout(function(){return a.updateWord()},16)},b}();a.Color=b}(c||(c={}));var c;!function(a){var b=function(){function b(a){this.score=document.getElementById("score"),this.shadow=document.getElementById("shadow"),this.num=document.getElementById("num"),this.replay=document.getElementById("restart"),this.result=a}return b.prototype.start=function(){var a=this;this.num.innerHTML=this.result.toString(),this.shadow.className+=" visible",this.score.className+=" open",e.Scene.attach(this.replay,"click",this.restart),e.Scene.attach(window,"keyup",function(){return a.restart()});var b=this.score.querySelector("a");b.href="https://twitter.com/share?text=Arriverez-vous Ã  faire mieux que mon score de "+this.result+" ? Pour tenter, c'est pas ici",this.time=(new Date).getTime()},b.prototype.restart=function(){var b=(new Date).getTime();b-this.time<400||e.Scene.change_scene(new a.Color)},b.prototype.terminate=function(){this.shadow.className=this.shadow.className.replace(/\s*\bvisible\b/,""),this.score.className=this.score.className.replace(/\s*\bopen\b/,"")},b}();a.Score=b}(c||(c={}));var c;!function(a){var b=function(){function b(){this.loader=document.getElementById("loader")}return b.prototype.start=function(){var a=this;this.loader.querySelector("div").innerHTML="Tap me !",e.Scene.attach(this.loader,"click",function(){return a.tap()}),e.Scene.attach(window,"keyup",function(){return a.tap()}),e.Scene.attach(this.loader.querySelector("a"),"click",function(b){return a.prevent(b)})},b.prototype.terminate=function(){},b.prototype.tap=function(){this.loader.className+=" loaded",e.Scene.change_scene(new a.Color)},b.prototype.prevent=function(a){a.stopPropagation()},b}();a.Title=b}(c||(c={}));var d;!function(a){var b=function(){function a(a,b,c){this.name=a,this.regular=b,this.light=c}return a}();a.Color=b}(d||(d={}));var e;!function(a){!function(a){function b(){g.forEach(function(a){a.e.removeEventListener(a.t,a.l,!1)})}function c(a,b,c){a.addEventListener(b,c,!1),g.push(new h(a,b,c))}function d(a){f.terminate(),b(),e(a)}function e(a){f=a,f.start()}var f,g=new Array,h=function(){function a(a,b,c){this.e=a,this.t=b,this.l=c}return a}();a.attach=c,a.change_scene=d,a.init_scene=e}(a.Scene||(a.Scene={}));a.Scene;!function(a){function b(a){for(var b=new Array,d=0;a>d;++d){var e;do e=c[Math.floor(Math.random()*c.length)];while(-1!=b.indexOf(e));b.push(e)}return b}var c=new Array;c.push(new d.Color("red","#D72545","#E7282D")),c.push(new d.Color("green","#27ae60","#2ecc71")),c.push(new d.Color("blue","#2980b9","#3498db")),c.push(new d.Color("yellow","#f39c12","#f1c40f")),c.push(new d.Color("orange","#EF7700","#DE6D00")),c.push(new d.Color("purple","#99439C","#d33682")),a.getColors=b}(a.Color||(a.Color={}));a.Color}(e||(e={})),window.onload=function(){e.Scene.init_scene(new c.Title)}}({},function(){return this}());